<md-dialog aria-label="Download Results" ng-cloak>
<md-dialog-content class="md-padding">
  <form
  name="downloadResultsForm"
  class="creation-dialog-form contract-form"
  id="downloadResultsForm"
  data-ng-submit="downloadResults()"
  novalidate
  >
    <header>
      <h3>Download Results</h3>
    </header>
  <fieldset>
    <div class="relative form-line">
      <md-autocomplete
      md-no-cache="true"
      ng-required="true"
      md-input-name="course"
      md-input-id="course"
      md-selected-item="downloadResultsData.selectedCourse"
      md-search-text="downloadResultsData.courseSearchText"
      md-items="course in courseSearch(downloadResultsData.courseSearchText)"
      md-item-text="course.name"
      md-min-length="0"
      placeholder="Course by name"
      >
      <md-item-template>
        <span md-highlight-text="downloadResultsData.courseSearchText"
        md-highlight-flags="i">{{course.name}}</span>
      </md-item-template>
      <md-not-found>
        No course found matching "{{downloadResultsData.courseSearchText}}"
      </md-not-found>
      </md-autocomplete>
      <div ng-messages="downloadResultsForm.course.$error" role="alert">
        <div class="error" ng-message="required">
          This field is required
        </div>
      </div>
    </div>
  </fieldset>

  <fieldset>
    <div class="relative form-line">
      <md-autocomplete
      md-no-cache="true"
      ng-required="true"
      md-input-name="project"
      md-input-id="project"
      data-ng-disabled="!downloadResultsData.selectedCourse"
      md-selected-item="downloadResultsData.selectedProject"
      md-search-text="downloadResultsData.projectSearchText"
      md-items="project in projectSearch(downloadResultsData.projectSearchText, downloadResultsData.selectedCourse)"
      md-item-text="project.name"
      md-min-length="0"
      placeholder="Project by name"
      >
      <md-item-template>
        <span md-highlight-text="downloadResultsData.projectSearchText"
        md-highlight-flags="i">{{project.name}}</span>
      </md-item-template>
      <md-not-found>
        No Projects found matching "{{downloadResultsData.projectSearchText}}"
      </md-not-found>
      </md-autocomplete>
      <div ng-messages="downloadResultsForm.project.$error" role="alert">
        <div class="error" ng-message="required">
          This field is required
        </div>
      </div>
    </div>
  </fieldset>

  <fieldset>
    <div class="relative form-line">
      <md-switch data-ng-model="downloadResultsData.teams_only">
        Teams Only: {{downloadResultsData.teams_only ? "Yes" : "No"}}
      </md-switch>
    </div>
  </fieldset>

  <p class="error" role="alert">
    {{downloadResultsData.error}}
  </p>

  <div class="flex-perfect-center-container">
    <button type="submit" class="contract-overlay"
    data-ng-disabled="downloadResultsForm.$invalid"
    data-ng-class="{loading: downloadResultsData.loading}"
    >
    <span class="label">Download</span>
    <i class="material-icons spinner">refresh</i>
  </button>
  </div>

</form>

</md-dialog-content>
</md-dialog>
